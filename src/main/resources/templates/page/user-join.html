<!DOCTYPE html>
<html lang="ko"
      layout:decorate="~{layouts/default}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<div layout:fragment="content">
  <div class="border-bottom d-flex justify-content-between mb-3">
    <h2>회원 등록</h2>

  </div>
  <div>
    <div class="mb-3">
      <label class="form-label" for="name">이름</label>
      <input class="form-control" id="name" placeholder="회원 이름"
             type="text">
    </div>
    <div class="mb-3">
      <button class="btn btn-primary" onclick="joinUser()">
        저장
      </button>
    </div>
  </div>
  <script type="text/javascript">
    const joinUser = () => {
      const name = document.querySelector('#name').value;

      if (name.trim() === "") {
        alert("이름을 입력해주세요.");
        return
      }

      const params = {
        name,
      }

      axios.post('/api/v1/users/join', params)
      .then(function (response) {
        console.log(response);
        alert("저장 되었습니다!");
        location.href = "/users";
      })
      .catch(function (error) {
        alert("저장에 실패하였습니다.");
        console.log(error);
      });
    }
  </script>
</div>
</html>
